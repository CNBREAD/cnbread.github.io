<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>æˆ‘çš„å¯¼èˆª+æ–‡ç« åˆ†äº«ç«™</title>
    <style>
        * {margin: 0; padding: 0; box-sizing: border-box; font-family: å¾®è½¯é›…é»‘, å®‹ä½“, sans-serif;}
        body {background: url('https://picsum.photos/id/10/1920/1080') no-repeat center center fixed; background-size: cover; min-height: 100vh; padding: 15px; color: #333;}
        body::before {content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); z-index: -1;}
        .container {width: 100%; max-width: 800px; margin: 0 auto; padding: 20px 0;}
        /* ç”¨æˆ·æ  */
        .user-bar {text-align: right; margin-bottom: 20px; font-size: 13px; color: #fff;}
        .user-btn {padding: 6px 10px; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; margin-left: 8px; color: #333; background: rgba(255,255,255,0.9);}
        .user-info {margin-right: 8px; text-shadow: 0 1px 2px rgba(0,0,0,0.5);}
        /* å¼¹çª—é€šç”¨ */
        .modal-mask {position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); display: none; justify-content: center; align-items: center; z-index: 999;}
        .modal-box {background: rgba(255,255,255,0.95); padding: 25px 20px; border-radius: 10px; width: 90%; max-width: 450px;}
        .modal-title {text-align: center; margin-bottom: 20px; font-size: 20px; color: #222;}
        .modal-input {width: 100%; padding: 10px 12px; margin-bottom: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; outline: none;}
        textarea.modal-input {min-height: 120px; resize: none;}
        .modal-input:focus {border-color: #4d88ff;}
        .modal-btn {width: 100%; padding: 10px; background: #4d88ff; color: #fff; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; margin-top: 8px;}
        .modal-btn:hover {background: #3377ff;}
        .modal-tip {font-size: 12px; color: #ff4444; text-align: center; margin-top: 10px; display: none;}
        .switch-modal {text-align: center; font-size: 12px; margin-top: 15px; color: #666;}
        .switch-modal span {color: #4d88ff; cursor: pointer;}
        /* æœç´¢åŒºï¼ˆå·²ä¿®å¤æº¢å‡ºï¼‰ */
        .search-box {text-align: center; padding: 20px 12px; background: rgba(255,255,255,0.9); border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); margin-bottom: 25px;}
        .search-box h2 {color: #222; margin-bottom: 15px; font-size: 24px;}
        .engine-group {margin-bottom: 12px; color: #666; font-size: 13px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px;}
        .search-input {display: flex; gap: 8px; margin-top: 10px; width: 100%;}
        #search-text {flex: 1; padding: 11px 12px; border: 2px solid #ddd; border-radius: 6px; font-size: 14px; background: rgba(255,255,255,0.95); min-width: 0; box-sizing: border-box;}
        #search-text:focus {border-color: #4d88ff;}
        #search-btn, #publish-btn {padding: 11px 16px; background: #4d88ff; color: #fff; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; white-space: nowrap; min-width: 60px;}
        #publish-btn {margin: 0 auto 20px; display: block;}
        #night-mode {padding: 7px 10px; border: 1px solid #ddd; border-radius: 4px; background: #fff; color: #333; cursor: pointer; font-size: 12px; margin-top: 10px;}
        /* å¯¼èˆªåŒº */
        .nav-box {display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px;/* æ ¸å¿ƒè°ƒæ•´ï¼šé—´è·ç¼©å°ï¼Œæ–‡ç« åŒºä¸Šç§» */}
        .nav-card {display: flex; align-items: center; justify-content: center; padding: 18px 12px; background: rgba(255,255,255,0.9); border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); text-decoration: none; font-size: 15px; font-weight: 500; color: #222; transition: all 0.2s;}
        .nav-card:hover {transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.2); background: #f5f5f5;}
        /* æ–‡ç« åŒºï¼ˆæ ¸å¿ƒè°ƒæ•´ï¼šæç¤ºæ–‡å­—é†’ç›®+åŠ åº•è‰²ï¼Œä¸€çœ¼å¯è§ï¼‰ */
        .article-list {margin-top: 10px; gap: 20px; display: flex; flex-direction: column;}
        .article-card {background: rgba(255,255,255,0.95); border-radius: 10px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);}
        .article-title {font-size: 18px; font-weight: bold; margin-bottom: 8px; color: #222;}
        .article-author {font-size: 12px; color: #666; margin-bottom: 10px;}
        .article-content {line-height: 1.6; margin-bottom: 15px; color: #333;}
        .article-op {display: flex; gap: 20px; align-items: center; margin-bottom: 15px;}
        .op-btn {display: flex; align-items: center; gap: 5px; border: none; background: transparent; cursor: pointer; color: #666;}
        .op-btn:hover {color: #4d88ff;}
        /* è¯„è®ºåŒº */
        .comment-list {margin-top: 15px; gap: 10px; display: flex; flex-direction: column;}
        .comment-card {padding: 10px 15px; background: #f8f8f8; border-radius: 6px; font-size: 14px;}
        .comment-author {font-size: 12px; font-weight: bold; color: #4d88ff; margin-bottom: 3px;}
        .comment-input-box {display: flex; gap: 8px; margin-top: 10px;}
        .comment-input {flex: 1; padding: 8px 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px;}
        .comment-submit {padding: 8px 12px; background: #4d88ff; color: #fff; border: none; border-radius: 6px; cursor: pointer; font-size: 13px; white-space: nowrap; min-width: 50px;}
        /* å°å±ä¼˜åŒ– */
        @media (max-width: 480px) {
            .search-input {gap: 6px;}
            #search-text {padding: 9px 10px; font-size: 13px;}
            #search-btn {padding: 9px 12px; font-size: 13px;}
            .search-box h2 {font-size: 20px;}
            .engine-group {font-size: 12px; gap: 8px;}
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ç”¨æˆ·æ  -->
        <div class="user-bar">
            <span class="user-info" id="user-info">æœªç™»å½•</span>
            <button class="user-btn" id="login-btn">ç™»å½•</button>
            <button class="user-btn" id="reg-btn">æ³¨å†Œ</button>
            <button class="user-btn" id="logout-btn" style="display: none;">é€€å‡ºç™»å½•</button>
        </div>

        <!-- æœç´¢åŒº -->
        <div class="search-box">
            <h2>å…¨ç½‘æœç´¢+æ–‡ç« åˆ†äº«ç«™</h2>
            <div class="engine-group">
                <label>é€‰æ‹©å¼•æ“ï¼š</label>
                <input type="radio" name="engine" value="baidu" checked id="baidu">
                <label for="baidu">ç™¾åº¦</label>
                <input type="radio" name="engine" value="sogou" id="sogou">
                <label for="sogou">æœç‹—</label>
                <input type="radio" name="engine" value="bing" id="bing">
                <label for="bing">å¿…åº”</label>
            </div>
            <div class="search-input">
                <input type="text" id="search-text" placeholder="è¾“å…¥å†…å®¹æœç´¢...">
                <button id="search-btn">æœç´¢</button>
            </div>
            <button id="night-mode">å¤œé—´æ¨¡å¼</button>
        </div>

        <!-- å‘å¸ƒæŒ‰é’® -->
        <button id="publish-btn" style="display: none;">å‘å¸ƒæ–‡ç« </button>

        <!-- å¯¼èˆªæ  -->
        <div class="nav-box">
            <a href="https://www.baidu.com" class="nav-card" target="_blank">ç™¾åº¦</a>
            <a href="https://www.bilibili.com" class="nav-card" target="_blank">å“”å“©å“”å“©</a>
            <a href="https://www.zhihu.com" class="nav-card" target="_blank">çŸ¥ä¹</a>
            <a href="https://www.douban.com" class="nav-card" target="_blank">è±†ç“£</a>
            <a href="https://www.taobao.com" class="nav-card" target="_blank">æ·˜å®</a>
            <a href="https://www.jd.com" class="nav-card" target="_blank">äº¬ä¸œ</a>
            <a href="https://weibo.com" class="nav-card" target="_blank">å¾®åš</a>
            <a href="https://www.163.com" class="nav-card" target="_blank">ç½‘æ˜“</a>
            <a href="https://www.xuetangx.com" class="nav-card" target="_blank">å­¦å ‚åœ¨çº¿</a>
            <a href="https://dict.youdao.com" class="nav-card" target="_blank">æœ‰é“è¯å…¸</a>
            <a href="https://www.icourse163.org" class="nav-card" target="_blank">ä¸­å›½å¤§å­¦MOOC</a>
            <a href="https://www.putclub.com" class="nav-card" target="_blank">æ™®ç‰¹è‹±è¯­å¬åŠ›</a>
        </div>

        <!-- æ–‡ç« åŒºï¼ˆè¿™é‡Œå°±æ˜¯æ˜¾ç¤ºæ–‡ç« çš„åœ°æ–¹ï¼ï¼‰ -->
        <div class="article-list" id="article-list"></div>
    </div>

    <!-- å„ç±»å¼¹çª— -->
    <div class="modal-mask" id="login-modal">
        <div class="modal-box">
            <h3 class="modal-title">è´¦å·ç™»å½•</h3>
            <input type="text" class="modal-input" id="login-username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å">
            <input type="password" class="modal-input" id="login-pwd" placeholder="è¯·è¾“å…¥å¯†ç ">
            <button class="modal-btn" id="do-login">ç™»å½•</button>
            <p class="modal-tip" id="login-tip">æç¤ºä¿¡æ¯</p>
            <p class="switch-modal">è¿˜æ²¡è´¦å·ï¼Ÿ<span id="to-reg">å»æ³¨å†Œ</span></p>
        </div>
    </div>
    <div class="modal-mask" id="reg-modal">
        <div class="modal-box">
            <h3 class="modal-title">è´¦å·æ³¨å†Œ</h3>
            <input type="text" class="modal-input" id="reg-username" placeholder="è®¾ç½®ç”¨æˆ·å">
            <input type="password" class="modal-input" id="reg-pwd" placeholder="6-12ä½æ•°å­—+å­—æ¯">
            <input type="email" class="modal-input" id="reg-email" placeholder="è¾“å…¥é‚®ç®±">
            <button class="modal-btn" id="do-reg">æ³¨å†Œ</button>
            <p class="modal-tip" id="reg-tip">æç¤ºä¿¡æ¯</p>
            <p class="switch-modal">å·²æœ‰è´¦å·ï¼Ÿ<span id="to-login">å»ç™»å½•</span></p>
        </div>
    </div>
    <div class="modal-mask" id="publish-modal">
        <div class="modal-box">
            <h3 class="modal-title">å‘å¸ƒæ–‡ç« </h3>
            <input type="text" class="modal-input" id="article-title" placeholder="æ–‡ç« æ ‡é¢˜">
            <textarea class="modal-input" id="article-content" placeholder="æ–‡ç« å†…å®¹"></textarea>
            <button class="modal-btn" id="do-publish">å‘å¸ƒ</button>
            <p class="modal-tip" id="publish-tip">æç¤ºä¿¡æ¯</p>
        </div>
    </div>

    <script>
        const GIST_ID = "452e531a8b8c2e7d27a4ad06a87f62a8";
        const GITHUB_TOKEN = "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";

        // æœç´¢åŠŸèƒ½
        const searchText = document.getElementById('search-text');
        const searchBtn = document.getElementById('search-btn');
        function getSearchUrl(content) {
          const engine = document.querySelector('input[name="engine"]:checked').value;
          switch(engine) {
            case 'sogou': return `https://www.sogou.com/web?query=${encodeURIComponent(content)}`;
            case 'bing': return `https://cn.bing.com/search?q=${encodeURIComponent(content)}`;
            default: return `https://www.baidu.com/s?wd=${encodeURIComponent(content)}`;
          }
        }
        searchBtn.onclick = () => searchText.value.trim() && window.open(getSearchUrl(searchText.value.trim()), '_blank');
        searchText.onkeydown = e => e.key === 'Enter' && (searchBtn.click(), setTimeout(() => searchText.value = '', 300));

        // Gist è¯»å†™æ ¸å¿ƒ
        async function getGistData() {
            try {
                const res = await fetch(`https://api.github.com/gists/${GIST_ID}`, {
                    headers: {'Authorization': `token ${GITHUB_TOKEN}`, 'Accept': 'application/vnd.github.v3+json'}
                });
                const gist = await res.json();
                const users = gist.files['users.json'] ? JSON.parse(gist.files['users.json'].content) : [];
                const articles = gist.files['articles.json'] ? JSON.parse(gist.files['articles.json'].content) : [];
                return {users, articles};
            } catch (err) {console.error('è·å–æ•°æ®å¤±è´¥', err); return {users: [], articles: []};}
        }
        async function saveGistData(users, articles) {
            try {
                await fetch(`https://api.github.com/gists/${GIST_ID}`, {
                    method: 'PATCH',
                    headers: {'Authorization': `token ${GITHUB_TOKEN}`, 'Accept': 'application/vnd.github.v3+json', 'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        files: {
                            'users.json': {content: JSON.stringify(users, null, 2)},
                            'articles.json': {content: JSON.stringify(articles, null, 2)}
                        }
                    })
                });
                return true;
            } catch (err) {console.error('ä¿å­˜æ•°æ®å¤±è´¥', err); return false;}
        }

        // ç™»å½•æ³¨å†Œ
        const loginModal = document.getElementById('login-modal');
        const regModal = document.getElementById('reg-modal');
        const publishModal = document.getElementById('publish-modal');
        const userInfo = document.getElementById('user-info');
        const loginBtn = document.getElementById('login-btn');
        const regBtn = document.getElementById('reg-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const publishBtn = document.getElementById('publish-btn');
        const articleList = document.getElementById('article-list');

        document.getElementById('to-reg').onclick = () => (loginModal.style.display = 'none', regModal.style.display = 'flex');
        document.getElementById('to-login').onclick = () => (regModal.style.display = 'none', loginModal.style.display = 'flex');
        loginBtn.onclick = () => loginModal.style.display = 'flex';
        regBtn.onclick = () => regModal.style.display = 'flex';
        publishBtn.onclick = () => publishModal.style.display = 'flex';
        [loginModal, regModal, publishModal].forEach(modal => modal.onclick = e => e.target === modal && (modal.style.display = 'none'));

        // æ³¨å†Œé€»è¾‘
        document.getElementById('do-reg').onclick = async () => {
            const username = document.getElementById('reg-username').value.trim();
            const pwd = document.getElementById('reg-pwd').value.trim();
            const email = document.getElementById('reg-email').value.trim();
            const regTip = document.getElementById('reg-tip');
            regTip.style.display = 'block';
            const pwdReg = /^(?=.*[0-9])(?=.*[a-zA-Z])[0-9a-zA-Z]{6,12}$/;
            if(!username) regTip.textContent = 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º';
            else if(!pwdReg.test(pwd)) regTip.textContent = 'å¯†ç éœ€6-12ä½æ•°å­—+å­—æ¯';
            else if(!email.includes('@')) regTip.textContent = 'é‚®ç®±æ ¼å¼é”™è¯¯';
            else {
                const {users, articles} = await getGistData();
                if(users.some(u => u.username === username)) regTip.textContent = 'ç”¨æˆ·åå·²å­˜åœ¨';
                else {
                    users.push({username, pwd, email});
                    if(await saveGistData(users, articles)) {
                        regTip.style.color = '#33cc66'; regTip.textContent = 'æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•';
                        setTimeout(() => (regModal.style.display = 'none', loginModal.style.display = 'flex'), 1500);
                    } else regTip.textContent = 'æ³¨å†Œå¤±è´¥ï¼Œé‡è¯•ä¸€ä¸‹';
                }
            }
        };

        // ç™»å½•é€»è¾‘
        document.getElementById('do-login').onclick = async () => {
            const username = document.getElementById('login-username').value.trim();
            const pwd = document.getElementById('login-pwd').value.trim();
            const loginTip = document.getElementById('login-tip');
            loginTip.style.display = 'block';
            if(!username || !pwd) loginTip.textContent = 'ç”¨æˆ·åå¯†ç ä¸èƒ½ä¸ºç©º';
            else {
                const {users} = await getGistData();
                const user = users.find(u => u.username === username && u.pwd === pwd);
                if(!user) loginTip.textContent = 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯';
                else {
                    sessionStorage.setItem('loginUser', JSON.stringify(user));
                    loginTip.style.color = '#33cc66'; loginTip.textContent = 'ç™»å½•æˆåŠŸï¼';
                    setTimeout(() => (loginModal.style.display = 'none', updateUserStatus(), renderArticles()), 1000);
                }
            }
        };

        logoutBtn.onclick = () => {sessionStorage.removeItem('loginUser'); updateUserStatus();};

        function updateUserStatus() {
            const user = JSON.parse(sessionStorage.getItem('loginUser'));
            if(user) {
                userInfo.textContent = `æ¬¢è¿ï¼š${user.username}`;
                loginBtn.style.display = regBtn.style.display = 'none';
                logoutBtn.style.display = publishBtn.style.display = 'block';
            } else {
                userInfo.textContent = 'æœªç™»å½•';
                loginBtn.style.display = regBtn.style.display = 'block';
                logoutBtn.style.display = publishBtn.style.display = 'none';
            }
        }

        // å‘å¸ƒæ–‡ç« 
        document.getElementById('do-publish').onclick = async () => {
            const title = document.getElementById('article-title').value.trim();
            const content = document.getElementById('article-content').value.trim();
            const publishTip = document.getElementById('publish-tip');
            publishTip.style.display = 'block';
            const user = JSON.parse(sessionStorage.getItem('loginUser'));
            if(!title || !content) publishTip.textContent = 'æ ‡é¢˜å’Œå†…å®¹ä¸èƒ½ä¸ºç©º';
            else {
                const {users, articles} = await getGistData();
                const newArticle = {
                    id: Date.now(), title, content, author: user.username,
                    time: new Date().toLocaleString(), likeNum: 0, likeUsers: [], comments: []
                };
                articles.unshift(newArticle);
                if(await saveGistData(users, articles)) {
                    publishTip.style.color = '#33cc66'; publishTip.textContent = 'å‘å¸ƒæˆåŠŸï¼';
                    setTimeout(() => {
                        publishModal.style.display = 'none';
                        document.getElementById('article-title').value = '';
                        document.getElementById('article-content').value = '';
                        renderArticles();
                    }, 1000);
                } else publishTip.textContent = 'å‘å¸ƒå¤±è´¥ï¼Œé‡è¯•ä¸€ä¸‹';
            }
        };

        // æ¸²æŸ“æ–‡ç« ï¼ˆæ ¸å¿ƒè°ƒæ•´ï¼šæç¤ºæ–‡å­—å˜é»„è‰²ç²—ä½“ï¼ŒåŠ åŠé€æ˜åº•è‰²ï¼Œè¶…é†’ç›®ï¼‰
        async function renderArticles() {
            const {articles} = await getGistData();
            const user = JSON.parse(sessionStorage.getItem('loginUser'));
            articleList.innerHTML = '';
            if(articles.length === 0) {
                articleList.innerHTML = '<div style="text-align:center; padding:25px; background:rgba(255,255,255,0.8); border-radius:10px; color:#ff9900; font-weight:bold; font-size:15px;">æš‚æ— æ–‡ç« ï¼Œç™»å½•åå¯å‘å¸ƒä½ çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï½</div>';
                return;
            }
            articles.forEach(art => {
                const isLiked = user ? art.likeUsers.includes(user.username) : false;
                const artCard = document.createElement('div');
                artCard.className = 'article-card';
                artCard.innerHTML = `
                    <div class="article-title">${art.title}</div>
                    <div class="article-author">ä½œè€…ï¼š${art.author} | å‘å¸ƒæ—¶é—´ï¼š${art.time}</div>
                    <div class="article-content">${art.content}</div>
                    <div class="article-op">
                        <button class="op-btn like-btn" data-id="${art.id}">
                            ${isLiked ? 'ğŸ‘ å·²ç‚¹èµ' : 'ğŸ‘ ç‚¹èµ'} (${art.likeNum})
                        </button>
                        <span>è¯„è®º(${art.comments.length})</span>
                    </div>
                    <div class="comment-list" id="comment-${art.id}"></div>
                    <div class="comment-input-box">
                        <input type="text" class="comment-input" id="comment-input-${art.id}" placeholder="è¾“å…¥è¯„è®ºå†…å®¹...">
                        <button class="comment-submit" data-id="${art.id}">å‘é€</button>
                    </div>
                `;
                articleList.appendChild(artCard);
                renderComments(art.id, art.comments);
                artCard.querySelector('.like-btn').onclick = () => handleLike(art.id);
                artCard.querySelector('.comment-submit').onclick = () => handleComment(art.id);
            });
        }

        // æ¸²æŸ“è¯„è®º
        function renderComments(artId, comments) {
            const commentList = document.getElementById(`comment-${art.id}`);
            commentList.innerHTML = '';
            comments.forEach(cmt => {
                const cmtCard = document.createElement('div');
                cmtCard.className = 'comment-card';
                cmtCard.innerHTML = `<div class="comment-author">${cmt.author}</div><div>${cmt.content}</div>`;
                commentList.appendChild(cmtCard);
            });
        }

        // ç‚¹èµåŠŸèƒ½
        async function handleLike(artId) {
            const user = JSON.parse(sessionStorage.getItem('loginUser'));
            if(!user) {loginModal.style.display = 'flex'; return;}
            const {users, articles} = await getGistData();
            const artIndex = articles.findIndex(art => art.id === artId);
            if(artIndex === -1) return;
            const targetArt = articles[artIndex];
            if(targetArt.likeUsers.includes(user.username)) {
                targetArt.likeNum--;
                targetArt.likeUsers = targetArt.likeUsers.filter(u => u !== user.username);
            } else {
                targetArt.likeNum++;
                targetArt.likeUsers.push(user.username);
            }
            await saveGistData(users, articles);
            renderArticles();
        }

        // è¯„è®ºåŠŸèƒ½
        async function handleComment(artId) {
            const user = JSON.parse(sessionStorage.getItem('loginUser'));
            const commentInput = document.getElementById(`comment-input-${artId}`);
            const content = commentInput.value.trim();
            if(!user) {loginModal.style.display = 'flex'; return;}
            if(!content) return;
            const {users, articles} = await getGistData();
            const artIndex = articles.findIndex(art => art.id === artId);
            articles[artIndex].comments.push({author: user.username, content, time: new Date().toLocaleString()});
            await saveGistData(users, articles);
            commentInput.value = '';
            renderArticles();
        }

        // å¤œé—´æ¨¡å¼
        const nightBtn = document.getElementById('night-mode');
        const body = document.body;
        const searchBox = document.querySelector('.search-box');
        const navCards = document.querySelectorAll('.nav-card');
        const modalBoxes = document.querySelectorAll('.modal-box');
        const modalInputs = document.querySelectorAll('.modal-input');
        const modalTitles = document.querySelectorAll('.modal-title');
        
        if(localStorage.getItem('nightMode') === 'on') setNightMode(true);
        nightBtn.onclick = () => {
            const isNight = localStorage.getItem('nightMode') === 'on';
            localStorage.setItem('nightMode', isNight ? 'off' : 'on');
            setNightMode(!isNight);
        };
        function setNightMode(isNight) {
            body.style.backgroundColor = isNight ? 'rgba(26,26,26,0.8)' : 'transparent';
            searchBox.style.background = isNight ? 'rgba(30,30,30,0.9)' : 'rgba(255,255,255,0.9)';
            searchBox.querySelector('h2').style.color = isNight ? '#f5f5f5' : '#222';
            navCards.forEach(card => {
                card.style.background = isNight ? 'rgba(30,30,30,0.9)' : 'rgba(255,255,255,0.9)';
                card.style.color = isNight ? '#f5f5f5' : '#222';
            });
            modalBoxes.forEach(box => box.style.background = isNight ? 'rgba(30,30,30,0.95)' : 'rgba(255,255,255,0.95)');
            modalTitles.forEach(t => t.style.color = isNight ? '#f5f5f5' : '#222');
            modalInputs.forEach(i => {
                i.style.background = isNight ? '#444' : '#fff';
                i.style.color = isNight ? '#fff' : '#333';
                i.style.borderColor = isNight ? '#555' : '#ddd';
            });
            document.querySelectorAll('.article-card').forEach(card => {
                card.style.background = isNight ? 'rgba(30,30,30,0.95)' : 'rgba(255,255,255,0.95)';
                card.querySelector('.article-title').style.color = isNight ? '#f5f5f5' : '#222';
                card.querySelector('.article-content').style.color = isNight ? '#eee' : '#333';
                card.querySelector('.article-author').style.color = isNight ? '#ccc' : '#666';
            });
            document.querySelectorAll('.comment-card').forEach(card => {
                card.style.background = isNight ? 'rgba(40,40,40,0.9)' : '#f8f8f8';
                card.style.color = isNight ? '#eee' : '#333';
            });
            nightBtn.textContent = isNight ? 'æ—¥é—´æ¨¡å¼' : 'å¤œé—´æ¨¡å¼';
        }

        // é¡µé¢åˆå§‹åŒ–
        window.onload = () => {updateUserStatus(); renderArticles();};
    </script>
</body>
</html>
